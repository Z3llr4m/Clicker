<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie Clicker Mobile Dark</title>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#111, #222);
  color: #fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow-x:hidden;
}
#totalCPS { font-size:20px; margin-top:10px; color:#00FF00; font-weight:bold; }
#cookieCounter { font-size:24px; margin:10px 0; color:#FFD700; font-weight:bold; }
#cookie {
  width: 200px; height: 200px;
  background: radial-gradient(circle at 30% 30%, #f4d182, #d39c4a);
  border-radius: 50%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:60px;
  margin:20px 0;
  box-shadow: 0 0 20px #fff;
  touch-action: manipulation;
  transition: transform 0.1s;
  position: relative;
}
.container {
  width: 90%; max-height: 200px;
  overflow-y: auto;
  background: rgba(0,0,0,0.6);
  border: 1px solid #444;
  border-radius: 8px;
  margin: 10px 0; padding: 5px;
}
.building, .upgrade {
  border:1px solid #666; border-radius:5px;
  background: rgba(255,255,255,0.1);
  margin:5px 0; padding:10px;
  cursor:pointer; color:#fff;
  display:flex; justify-content:space-between; align-items:center;
  transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
}
.building.disabled, .upgrade.disabled { opacity:0.4; pointer-events:none; }
.building.enabled, .upgrade.enabled { opacity:1; }
#stats { font-size:14px; width:90%; background: rgba(0,0,0,0.5); padding:5px; border-radius:5px; }
button.prestige {
  margin:10px; padding:10px 20px; font-size:16px;
  background:#444; color:#fff; border:none; border-radius:5px;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="totalCPS">CPS: 0</div>
<div id="cookieCounter">0 üç™</div>
<div id="cookie">üç™</div>

<div class="container" id="buildings"></div>
<div class="container" id="upgrades"></div>
<div id="stats"></div>

<button class="prestige">–ü—Ä–µ—Å—Ç–∏–∂</button>

<script>
// -------------------- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ --------------------
const cookie = document.getElementById('cookie');
const cookieCounter = document.getElementById('cookieCounter');
const buildingsDiv = document.getElementById('buildings');
const upgradesDiv = document.getElementById('upgrades');
const statsDiv = document.getElementById('stats');
const prestigeBtn = document.querySelector('.prestige');

let cookies=0, totalCookies=0, goldenCookies=0, prestigeMultiplier=0;

// -------------------- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª --------------------
function formatNumber(n){
  if(n>=1e12) return (n/1e12).toFixed(2)+'T';
  if(n>=1e9) return (n/1e9).toFixed(2)+'B';
  if(n>=1e6) return (n/1e6).toFixed(2)+'M';
  if(n>=1e3) return (n/1e3).toFixed(1)+'k';
  return Math.floor(n);
}

// -------------------- –ó–¥–∞–Ω–∏—è --------------------
const buildingEmojis = {
  "–ö—É—Ä—Å–æ—Ä":"üñ±Ô∏è","–ë–∞–±—É—à–∫–∞":"üëµ","–§–µ—Ä–º–∞":"üåæ","–§–∞–±—Ä–∏–∫–∞":"üè≠","–®–∞—Ö—Ç–∞":"‚õèÔ∏è",
  "–ú–∞–≥–∏—á–µ—Å–∫–∞—è –±–∞—à–Ω—è":"üßô‚Äç‚ôÇÔ∏è","–•—Ä–∞–º":"‚õ™","–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è":"üî¨","–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–Ω—Ü–∏—è":"üõ∞Ô∏è",
  "–î—Ä–∞–∫–æ–Ω—å–µ –ª–æ–≥–æ–≤–æ":"üêâ","–ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏":"‚è≥","–ê–Ω—Ç–∏–º–∞—Ç–µ—Ä–∏—è":"‚ö´","–ê–ª—Ö–∏–º–∏—è":"‚öóÔ∏è",
  "–ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø–µ—á–µ–Ω—å–µ":"üåå","–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥—É—Ö":"üëº"
};

const buildings = {};
Object.keys(buildingEmojis).forEach((name,i)=>{
  let base = Math.pow(10,i+1)*15/10; // —Ü–µ–Ω—ã –≤ 10 —Ä–∞–∑ –º–µ–Ω—å—à–µ
  buildings[name] = {
    basePrice: base,
    owned:0,
    baseCPS: Math.pow(10,i)/10,
    multiplier:1,
    nextUpgrade:0,
    upgrades:[]
  };
  for(let j=1;j<=10;j++){
    buildings[name].upgrades.push({
      level:j,
      multiplier:2,
      price: base*10 + (j-1)*10,
      emoji: buildingEmojis[name],
      name:`${name} x${j+1}`
    });
  }
});

// -------------------- –ê–Ω–∏–º–∞—Ü–∏–∏ --------------------
function showFloatingCookie() {
    const effect = document.createElement('div');
    const rect = cookie.getBoundingClientRect();
    effect.style.position='absolute';
    effect.style.left=(rect.left+rect.width/2-15 + (Math.random()*30-15))+'px';
    effect.style.top=(rect.top+rect.height/2-15 + (Math.random()*30-15))+'px';
    effect.style.fontSize=(20+Math.random()*20)+'px';
    effect.style.opacity=0.5;
    effect.style.pointerEvents='none';
    effect.innerText='üç™';
    document.body.appendChild(effect);
    let pos = 0;
    const anim = setInterval(()=>{
        pos+=1+Math.random();
        effect.style.top = pos+'px';
        effect.style.opacity = 0.5 + 0.5*Math.sin(pos/50);
        if(pos>window.innerHeight+30){ clearInterval(anim); effect.remove(); }
    },30);
}

function showFloatingNumber(amount){
    const effect = document.createElement('div');
    const rect = cookie.getBoundingClientRect();
    effect.style.position='absolute';
    effect.style.left=(rect.left+rect.width/2-15 + (Math.random()*30-15))+'px';
    effect.style.top=(rect.top+rect.height/2-15 + (Math.random()*30-15))+'px';
    effect.style.fontSize='24px';
    effect.style.color='#FFD700';
    effect.style.fontWeight='bold';
    effect.style.opacity=1;
    effect.style.pointerEvents='none';
    effect.innerText='+'+formatNumber(amount);
    document.body.appendChild(effect);
    let pos=0;
    const anim=setInterval(()=>{
        pos++;
        effect.style.transform=`translateY(${-pos}px) scale(${1 + pos/50})`;
        effect.style.opacity=1-pos/50;
        if(pos>50){clearInterval(anim); effect.remove();}
    },10);
}

function animatePurchase(element){
    element.style.transform='scale(1.1)';
    element.style.boxShadow='0 0 20px #FFD700';
    setTimeout(()=>{element.style.transform='scale(1)'; element.style.boxShadow='0 0 0 #fff';},200);
}

// -------------------- –ö–ª–∏–∫ –ø–æ –ø–µ—á–µ–Ω—å–∫–µ --------------------
cookie.addEventListener('click', ()=>{
  cookies++; totalCookies++;
  showFloatingCookie();
  showFloatingNumber(1);
  cookie.style.transform='scale(1.2)';
  setTimeout(()=>{cookie.style.transform='scale(1)';},100);
  cookieCounter.innerText = formatNumber(cookies)+' üç™';
});

// -------------------- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–π --------------------
function updateBuildings(){
  buildingsDiv.innerHTML='';
  let totalCPS=0;
  Object.keys(buildings).forEach(b=>{
    const bd=buildings[b];
    const currentCPS = (bd.owned * bd.baseCPS * bd.multiplier).toFixed(1);
    totalCPS += bd.owned*bd.baseCPS*bd.multiplier;
    const currentPrice = bd.basePrice * Math.pow(1.15, bd.owned);
    const div=document.createElement('div');
    div.className='building '+(cookies>=currentPrice?'enabled':'disabled');
    div.innerHTML=`<span>${bd.owned>0?bd.owned+'x ':''}${buildingEmojis[b]} ${b} (CPS: ${currentCPS})</span><span>–¶–µ–Ω–∞: ${formatNumber(Math.floor(currentPrice))}</span>`;
    div.onclick=()=>{
      if(cookies>=currentPrice){
        cookies-=currentPrice;
        bd.owned++;
        animatePurchase(div);
        updateBuildings();
        updateStats();
      }
    };
    buildingsDiv.appendChild(div);
  });
  document.getElementById('totalCPS').innerText = 'CPS: '+formatNumber(totalCPS);
}

// -------------------- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–ø–≥—Ä–µ–π–¥–æ–≤ --------------------
function updateUpgrades(){
  upgradesDiv.innerHTML='';
  Object.keys(buildings).forEach(b=>{
    const bd=buildings[b];
    const upg=bd.upgrades[bd.nextUpgrade];
    if(upg){
      const div=document.createElement('div');
      div.className='upgrade '+(cookies>=upg.price?'enabled':'disabled');
      div.innerHTML=`<span>${upg.emoji} ${upg.name}</span><span>–¶–µ–Ω–∞: ${formatNumber(Math.floor(upg.price))}</span>`;
      div.onclick=()=>{
        if(cookies>=upg.price){
          cookies-=upg.price;
          bd.multiplier*=upg.multiplier;
          bd.nextUpgrade++;
          animatePurchase(div);
          updateUpgrades();
          updateBuildings();
          updateStats();
        }
      };
      upgradesDiv.appendChild(div);
    }
  });
}

// -------------------- CPS --------------------
function cpsTick(){
  let cps=0;
  Object.keys(buildings).forEach(b=>{
    const bd=buildings[b];
    cps+=bd.owned*bd.baseCPS*bd.multiplier;
  });
  cookies+=cps; totalCookies+=cps;
  cookieCounter.innerText = formatNumber(cookies)+' üç™';
  updateStats();
}
setInterval(cpsTick,1000);

// -------------------- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ --------------------
function updateStats(){
  let statText=`–í—Å–µ–≥–æ –ø–µ—á–µ–Ω–µ–∫: ${formatNumber(totalCookies)} | –ó–æ–ª–æ—Ç—ã–µ: ${goldenCookies} | –ü—Ä–µ—Å—Ç–∏–∂ –±–æ–Ω—É—Å: ${(prestigeMultiplier*100).toFixed(1)}%`;
  statsDiv.innerText=statText;
}

// -------------------- –ü—Ä–µ—Å—Ç–∏–∂ --------------------
prestigeBtn.onclick = ()=>{
  if(cookies>=1e12){
    const bonus=0.001;
    if(confirm(`–í—ã –Ω–∞–∫–æ–ø–∏–ª–∏ 1 —Ç—Ä–ª–Ω –ø–µ—á–µ–Ω–µ–∫. –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂ –¥–ª—è +0.1% –∫ –∑–æ–ª–æ—Ç—ã–º –ø–µ—á–µ–Ω—å–∫–∞–º?`)){
      prestigeMultiplier+=bonus;
      goldenCookies+=1;
      cookies=0;
      Object.keys(buildings).forEach(b=>{
        buildings[b].owned=0; 
        buildings[b].multiplier=1; 
        buildings[b].nextUpgrade=0;
      });
      updateBuildings(); updateUpgrades(); updateStats();
      cookieCounter.innerText = formatNumber(cookies)+' üç™';
    }
  } else alert('–ù—É–∂–Ω–æ –Ω–∞–∫–æ–ø–∏—Ç—å 1 —Ç—Ä–ª–Ω –ø–µ—á–µ–Ω–µ–∫ –¥–ª—è –ø—Ä–µ—Å—Ç–∏–∂–∞');
}

// -------------------- –õ–µ—Ç–∞—é—â–∏–µ –ø–µ—á–µ–Ω—å–∫–∏ --------------------
function flyingCookiesBackground() {
    const effect = document.createElement('div');
    effect.innerText = 'üç™';
    effect.style.position='absolute';
    effect.style.fontSize=(10+Math.random()*20)+'px';
    effect.style.left=Math.random()*window.innerWidth+'px';
    effect.style.top='-30px';
    effect.style.opacity=0.5;
    effect.style.pointerEvents='none';
    document.body.appendChild(effect);
    let pos=0;
    const anim = setInterval(()=>{
        pos+=1 + Math.random()*2;
        effect.style.top = pos+'px';
        effect.style.opacity = 0.5 + 0.5*Math.sin(pos/50);
        if(pos>window.innerHeight+30){ clearInterval(anim); effect.remove(); }
    },30);
}
setInterval(flyingCookiesBackground, 500);

// -------------------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è --------------------
updateBuildings();
updateUpgrades();
updateStats();
</script>

</body>
</html>
