<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Cookie Clicker Mobile</title>
<style>
body { margin:0; font-family:sans-serif; background:#1f1f2e; color:white; overflow-x:hidden; display:flex; justify-content:center; }
.container { width:100%; max-width:500px; display:flex; flex-direction:column; align-items:center; padding:16px; position:relative; z-index:1; }
.cookie { width:160px; height:160px; border-radius:50%; background:linear-gradient(145deg,#f6e2b3,#f0c66a); display:flex; align-items:center; justify-content:center; font-size:52px; cursor:pointer; position:relative; margin-bottom:16px; box-shadow:0 0 20px rgba(255,255,255,0.2); }
.crumb { position:absolute; border-radius:50%; width:10px; height:10px; background:rgba(255,255,255,0.6); }
.stats { display:flex; flex-direction:column; align-items:center; gap:6px; margin-bottom:16px; }
.stat { background:rgba(255,255,255,0.1); padding:6px 12px; border-radius:8px; font-size:16px; width:100%; text-align:center; }
.store, .upgrades { display:flex; flex-direction:column; gap:8px; max-height:300px; overflow-y:auto; width:100%; margin-bottom:16px; }
.item, .upgrade { display:flex; justify-content:space-between; padding:8px 12px; background:rgba(255,255,255,0.05); border-radius:10px; align-items:center; transition:transform 0.1s; }
.item button, .upgrade button { background:#f5c24a; border:0; border-radius:8px; cursor:pointer; padding:6px 12px; color:#222; font-weight:700; min-width:70px; }
.upgrade.bought { opacity:0.5; }
h3 { margin:8px 0; width:100%; text-align:left; font-size:18px; }
.modal-bg { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:10; }
.modal { background:#2a2a3d; padding:20px; border-radius:12px; text-align:center; width:80%; max-width:400px; max-height:90%; overflow-y:auto; }
.modal button { margin:10px; padding:8px 16px; border-radius:8px; border:none; font-weight:700; cursor:pointer; }
.cookie-fly { position:absolute; font-size:16px; opacity:0.7; pointer-events:none; animation-name:fly; animation-timing-function:linear; }
@keyframes fly { 0% {transform:translateY(0) rotate(0deg);} 100% {transform:translateY(-1200px) rotate(360deg);} }
.click-number { position:absolute; color:#fff; font-weight:700; font-size:20px; pointer-events:none; transition: all 1s ease-out; }
.tab-buttons { display:flex; justify-content:space-around; margin-bottom:12px; }
.tab-buttons button { flex:1; margin:0 4px; padding:6px; border-radius:8px; border:none; font-weight:700; cursor:pointer; }
.tab-content { text-align:left; font-size:14px; }
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.3); border-radius:3px; }
</style>
</head>
<body>
<div class="container">
  <div id="cookieBtn" class="cookie">üç™</div>
  <div class="stats">
    <div class="stat">–ü–µ—á–µ–Ω—å–∫–∏: <span id="cookiesDisplay">0</span></div>
    <div class="stat">CPS: <span id="cpsDisplay">0</span></div>
    <div class="stat">–ö–ª–∏–∫: <span id="clickPower">1</span></div>
    <div class="stat">–ü—Ä–µ—Å—Ç–∏–∂: <span id="prestigePoints">0</span></div>
    <div class="stat">–ó–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å–∫–∏: <span id="goldCookies">0</span></div>
  </div>
  <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
  <div id="store" class="store"></div>
  <h3>–ê–ø–≥—Ä–µ–π–¥—ã</h3>
  <div id="upgrades" class="upgrades"></div>
  <button id="prestigeBtn" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; font-size:16px;">–ü—Ä–µ—Å—Ç–∏–∂</button>
  <button id="statsBtn" style="width:100%; padding:10px; border-radius:10px; font-size:16px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
</div>

<div id="prestigeModal" class="modal-bg">
  <div class="modal">
    <p id="prestigeText"></p>
    <button id="prestigeYes" style="background:#4caf50;">–î–∞</button>
    <button id="prestigeNo" style="background:#f44336;">–ù–µ—Ç</button>
  </div>
</div>

<div id="statsModal" class="modal-bg">
  <div class="modal">
    <div class="tab-buttons">
      <button id="tabCurrent">–¢–µ–∫—É—â–∏–π –∑–∞–±–µ–≥</button>
      <button id="tabOverall">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
    </div>
    <div id="tabContent" class="tab-content"></div>
    <button onclick="document.getElementById('statsModal').style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
// ======== –°–æ—Å—Ç–æ—è–Ω–∏–µ ========
let state = {
  cookies:0, totalCookies:0, clicks:0, clickPower:1,
  goldCookies:0, prestige:{points:0,multiplier:1},
  buildings:{}, upgrades:{}, lastTick:Date.now(),
  startTime:Date.now(), sessionTime:0,
  overall:{totalCookies:0,totalGold:0,prestiges:0,totalTime:0,clicks:0}
};
const buildingList=[
  {key:'cursor',name:'–ö—É—Ä—Å–æ—Ä',baseCost:15,baseCPS:0.1,emoji:'üñ±Ô∏è'},
  {key:'grandma',name:'–ë–∞–±—É—à–∫–∞',baseCost:100,baseCPS:1,emoji:'üëµ'},
  {key:'farm',name:'–§–µ—Ä–º–∞',baseCost:1100,baseCPS:8,emoji:'üåæ'},
  {key:'mine',name:'–®–∞—Ö—Ç–∞',baseCost:12000,baseCPS:47,emoji:'‚õèÔ∏è'},
  {key:'factory',name:'–§–∞–±—Ä–∏–∫–∞',baseCost:130000,baseCPS:260,emoji:'üè≠'},
  {key:'bank',name:'–ë–∞–Ω–∫',baseCost:1400000,baseCPS:1400,emoji:'üè¶'},
  {key:'temple',name:'–•—Ä–∞–º',baseCost:20000000,baseCPS:7800,emoji:'‚õ©Ô∏è'},
  {key:'wizard',name:'–í–æ–ª—à–µ–±–Ω–∏–∫',baseCost:330000000,baseCPS:44000,emoji:'üßô‚Äç‚ôÇÔ∏è'},
  {key:'shipment',name:'–û—Ç–≥—Ä—É–∑–∫–∞',baseCost:5100000000,baseCPS:260000,emoji:'üö¢'},
  {key:'alchemy',name:'–ê–ª—Ö–∏–º–∏—è',baseCost:75000000000,baseCPS:1600000,emoji:'‚öóÔ∏è'},
  {key:'portal',name:'–ü–æ—Ä—Ç–∞–ª',baseCost:1e12,baseCPS:10000000,emoji:'üåÄ'},
  {key:'blackhole',name:'–ß—ë—Ä–Ω–∞—è –¥—ã—Ä–∞',baseCost:1e14,baseCPS:66666666,emoji:'üåå'},
  {key:'timeMachine',name:'–ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏',baseCost:1e16,baseCPS:2e8,emoji:'‚è≥'},
  {key:'antimatter',name:'–ê–Ω—Ç–∏-–º–∞—Ç–µ—Ä–∏—è',baseCost:1e18,baseCPS:1e9,emoji:'üï≥Ô∏è'},
  {key:'quantumLab',name:'–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è',baseCost:5e19,baseCPS:5e9,emoji:'üî¨'}
];

// ======== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ========
function initState(){
  state.buildings = {};
  buildingList.forEach(b=>{
    state.buildings[b.key]={...b, qty:0, cps:b.baseCPS, cost:b.baseCost};
  });
  const buildingKeys = Object.keys(state.buildings);
  state.upgrades = {};
  for(let i=1;i<=1000;i++){
    const type = Math.random()<0.5?'click':'building';
    let u={id:i,bought:false,type:type,multiplier:2,cost:Math.round(100*Math.pow(1.15,i))};
    if(type==='click') u.name=`–£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞ √ó2`;
    else { u.target=buildingKeys[Math.floor(Math.random()*buildingKeys.length)]; u.name=`–£–ª—É—á—à–µ–Ω–∏–µ ${u.target} √ó2`; }
    state.upgrades[i]=u;
  }
}
initState();

// ======== –§—É–Ω–∫—Ü–∏–∏ ========
function fmt(n){if(n<1000) return Math.round(n*100)/100; const units=['K','M','B','T','Qa','Qi','Sx','Sp','Oc','No']; let u=-1,v=n; while(v>=1000&&u<units.length-1){v/=1000;u++;} return v.toFixed(2)+units[u];}

function getCPS(){ let cps=0; Object.values(state.buildings).forEach(b=>cps+=b.qty*b.cps); return cps*(1+state.goldCookies*0.001); }

function clickCookie(){
  const amount = state.clickPower*(1+state.goldCookies*0.001);
  state.cookies+=amount; 
  state.totalCookies+=amount; 
  state.clicks++; 
  spawnCrumb(); spawnFlyingCookie(); spawnClickNumber(amount); animateCookie();
  render(); checkGoldCookie();
}

function buyBuilding(key){
  const b = state.buildings[key];
  if(state.cookies>=b.cost){ state.cookies-=b.cost; b.qty++; b.cost*=1.15; render(); } 
}

function buyUpgrade(id){
  const u = state.upgrades[id];
  if(!u.bought && state.cookies>=u.cost){ state.cookies-=u.cost; u.bought=true;
    if(u.type==='click') state.clickPower*=u.multiplier;
    else state.buildings[u.target].cps*=u.multiplier;
    render();
  }
}

// ======== –ü—Ä–µ—Å—Ç–∏–∂ ========
function checkGoldCookie(){ 
  if(state.totalCookies>=1e12){ document.getElementById('prestigeBtn').style.background='#ffd700'; }
}
function prestigeReset(){
  const earnedGold = Math.floor(state.totalCookies/1e12);
  if(earnedGold>0){
    document.getElementById('prestigeText').textContent=`–í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å ${earnedGold} –∑–æ–ª–æ—Ç—ã—Ö –ø–µ—á–µ–Ω–µ–∫ (0.1% –±–æ–Ω—É—Å –∫ CPS –∏ –∫–ª–∏–∫—É). –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂?`;
    document.getElementById('prestigeModal').style.display='flex';
  } else alert('–ù—É–∂–Ω–æ –Ω–∞–∫–æ–ø–∏—Ç—å —Ö–æ—Ç—è –±—ã 1 —Ç—Ä–ª–Ω –ø–µ—á–µ–Ω–µ–∫ –¥–ª—è –ø—Ä–µ—Å—Ç–∏–∂–∞!');
}

// ======== –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —á–∏—Å–ª–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ ========
function animateCookie(){ const cookie=document.getElementById('cookieBtn'); cookie.style.transform='scale(1.2)'; setTimeout(()=>cookie.style.transform='scale(1)',100); }
function spawnClickNumber(amount){ const cookie=document.getElementById('cookieBtn'); const num=document.createElement('div'); num.textContent='+'+fmt(amount); num.className='click-number'; cookie.appendChild(num); setTimeout(()=>{ num.style.top='-20px'; num.style.opacity='0'; num.style.fontSize='28px'; },10); setTimeout(()=>num.remove(),1000);}
function spawnFlyingCookie(){ const fly=document.createElement('div'); fly.className='cookie-fly'; fly.style.left=Math.random()*window.innerWidth+'px'; fly.style.fontSize=(10+Math.random()*20)+'px'; fly.style.animationDuration=(5+Math.random()*5)+'s'; fly.style.opacity=(0.5+Math.random()*0.5); fly.textContent='üç™'; document.body.appendChild(fly); setTimeout(()=>fly.remove(),10000);}
function spawnCrumb(){ const cookie=document.getElementById('cookieBtn'); const crumb=document.createElement('div'); crumb.className='crumb'; crumb.style.left=Math.random()*140+'px'; crumb.style.top=Math.random()*140+'px'; cookie.appendChild(crumb); setTimeout(()=>crumb.remove(),600);}

// ======== –†–µ–Ω–¥–µ—Ä ========
function render(){
  document.getElementById('cookiesDisplay').textContent=fmt(state.cookies);
  document.getElementById('cpsDisplay').textContent=fmt(getCPS());
  document.getElementById('clickPower').textContent=fmt(state.clickPower*(1+state.goldCookies*0.001));
  document.getElementById('prestigePoints').textContent=fmt(state.prestige.points);
  document.getElementById('goldCookies').textContent=fmt(state.goldCookies);

  const storeDiv=document.getElementById('store'); storeDiv.innerHTML='';
  Object.values(state.buildings).forEach(b=>{
    const div=document.createElement('div'); div.className='item';
    div.style.background=state.cookies>=b.cost?'rgba(0,200,0,0.2)':'rgba(255,255,255,0.05)';
    div.innerHTML=`<div>${b.emoji} ${b.name} (${b.qty})</div><div>${fmt(b.cost)}</div><button data-key="${b.key}">–ö—É–ø–∏—Ç—å</button>`;
    storeDiv.appendChild(div);
    const btn = div.querySelector('button');
    btn.addEventListener('mousedown',()=>div.style.transform='scale(0.95)');
    btn.addEventListener('mouseup',()=>div.style.transform='scale(1)');
    btn.addEventListener('touchstart',()=>div.style.transform='scale(0.95)');
    btn.addEventListener('touchend',()=>div.style.transform='scale(1)');
  });

  const upgradesDiv=document.getElementById('upgrades'); upgradesDiv.innerHTML='';
  Object.values(state.upgrades).forEach(u=>{
    const div=document.createElement('div'); div.className='upgrade'+(u.bought?' bought':'');
    div.style.background=!u.bought && state.cookies>=u.cost?'rgba(255,215,0,0.3)':(!u.bought?'rgba(255,255,255,0.05)':'');
    div.innerHTML=`<div>${u.name} (${fmt(u.cost)})</div><button data-id="${u.id}" ${u.bought?'disabled':''}>–ö—É–ø–∏—Ç—å</button>`;
    upgradesDiv.appendChild(div);
    const btn = div.querySelector('button');
    btn.addEventListener('mousedown',()=>div.style.transform='scale(0.95)');
    btn.addEventListener('mouseup',()=>div.style.transform='scale(1)');
    btn.addEventListener('touchstart',()=>div.style.transform='scale(0.95)');
    btn.addEventListener('touchend',()=>div.style.transform='scale(1)');
  });

  document.querySelectorAll('.item button').forEach(btn=>{ btn.onclick=()=>buyBuilding(btn.dataset.key); btn.ontouchstart=()=>buyBuilding(btn.dataset.key); });
  document.querySelectorAll('.upgrade button').forEach(btn=>{ btn.onclick=()=>buyUpgrade(btn.dataset.id); btn.ontouchstart=()=>buyUpgrade(btn.dataset.id); });
}

// ======== –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ========
function updateStatsModal(tab){
  let html='';
  if(tab==='current'){
    let tSec = Math.floor((Date.now()-state.startTime)/1000);
    html+=`–í—Ä–µ–º—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–±–µ–≥–∞: ${Math.floor(tSec/3600)}—á ${Math.floor((tSec%3600)/60)}–º ${tSec%60}—Å<br>`;
    html+=`–ü–µ—á–µ–Ω—å–∫–∏: ${fmt(state.cookies)}<br>`;
    html+=`–ó–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å–∫–∏: ${fmt(state.goldCookies)}<br>`;
    html+=`–ü—Ä–µ—Å—Ç–∏–∂: ${fmt(state.prestige.points)}<br>`;
    html+=`–ö–ª–∏–∫–∏: ${fmt(state.clicks)}<br>`;
  } else {
    let tSec = Math.floor(state.overall.totalTime/1000);
    html+=`–û–±—â–µ–µ –≤—Ä–µ–º—è: ${Math.floor(tSec/3600)}—á ${Math.floor((tSec%3600)/60)}–º ${tSec%60}—Å<br>`;
    html+=`–û–±—â–∏–µ –ø–µ—á–µ–Ω—å–∫–∏: ${fmt(state.overall.totalCookies)}<br>`;
    html+=`–ó–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å–∫–∏: ${fmt(state.overall.totalGold)}<br>`;
    html+=`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ—Å—Ç–∏–∂–∞: ${state.overall.prestiges}<br>`;
    html+=`–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤: ${fmt(state.overall.clicks)}<br>`;
  }
  document.getElementById('tabContent').innerHTML=html;
}

// ======== –°–æ–±—ã—Ç–∏—è ========
document.getElementById('cookieBtn').addEventListener('touchstart',e=>{e.preventDefault(); clickCookie();});
document.getElementById('cookieBtn').addEventListener('mousedown',clickCookie);
document.getElementById('prestigeBtn').addEventListener('click',prestigeReset);
document.getElementById('prestigeBtn').addEventListener('touchstart',e=>{e.preventDefault(); prestigeReset();});

document.getElementById('prestigeYes').addEventListener('click',()=>{
  const earnedGold = Math.floor(state.totalCookies/1e12);
  state.goldCookies += earnedGold;
  state.overall.totalGold += earnedGold;
  state.overall.totalCookies += state.totalCookies;
  state.overall.totalTime += (Date.now()-state.startTime);
  state.overall.prestiges++;
  state.overall.clicks += state.clicks;
  state.cookies=0; state.totalCookies=0; state.clickPower=1; state.clicks=0; state.startTime=Date.now();
  Object.values(state.buildings).forEach(b=>{ b.qty=0; b.cps=b.baseCPS; b.cost=b.baseCost; });
  Object.values(state.upgrades).forEach(u=>u.bought=false);
  document.getElementById('prestigeModal').style.display='none';
  render();
});

document.getElementById('prestigeNo').addEventListener('click',()=>{ document.getElementById('prestigeModal').style.display='none'; });

document.getElementById('statsBtn').addEventListener('click',()=>{
  document.getElementById('statsModal').style.display='flex';
  updateStatsModal('current');
});

document.getElementById('tabCurrent').addEventListener('click',()=>updateStatsModal('current'));
document.getElementById('tabOverall').addEventListener('click',()=>updateStatsModal('overall'));

// ======== –ê–≤—Ç–æ CPS ========
setInterval(()=>{
  const now = Date.now(); const delta=(now-state.lastTick)/1000;
  state.lastTick=now;
  const gain = getCPS()*delta;
  state.cookies+=gain;
  state.totalCookies+=gain;
  render();
},100);

// ======== –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä ========
render();
</script>
</body>
</html>
