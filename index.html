<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Cookie Clicker Mobile</title>
<style>
body { margin:0; font-family:sans-serif; background:#1f1f2e; color:white; transition:background 1s ease; display:flex; justify-content:center; }
.container { width:100%; max-width:500px; display:flex; flex-direction:column; align-items:center; padding:16px; }
.cookie { width:160px; height:160px; border-radius:50%; background:linear-gradient(145deg,#f6e2b3,#f0c66a); display:flex; align-items:center; justify-content:center; font-size:52px; cursor:pointer; position:relative; margin-bottom:16px; box-shadow:0 0 20px rgba(255,255,255,0.2); }
.crumb { position:absolute; border-radius:50%; width:10px; height:10px; background:rgba(255,255,255,0.6); }
.stats { display:flex; flex-direction:column; align-items:center; gap:6px; margin-bottom:16px; }
.stat { background:rgba(255,255,255,0.1); padding:6px 12px; border-radius:8px; font-size:16px; width:100%; text-align:center; }
.store, .upgrades { display:flex; flex-direction:column; gap:8px; max-height:300px; overflow-y:auto; width:100%; margin-bottom:16px; }
.item, .upgrade { display:flex; justify-content:space-between; padding:8px 12px; background:rgba(255,255,255,0.05); border-radius:10px; align-items:center; }
.item button, .upgrade button { background:#f5c24a; border:0; border-radius:8px; cursor:pointer; padding:6px 12px; color:#222; font-weight:700; min-width:70px; }
.upgrade.bought { opacity:0.5; }
h3 { margin:8px 0; width:100%; text-align:left; font-size:18px; }
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.3); border-radius:3px; }
</style>
</head>
<body>
<div class="container">
  <div id="cookieBtn" class="cookie">üç™</div>
  <div class="stats">
    <div class="stat">–ü–µ—á–µ–Ω—å–∫–∏: <span id="cookiesDisplay">0</span></div>
    <div class="stat">CPS: <span id="cpsDisplay">0</span></div>
    <div class="stat">–ö–ª–∏–∫: <span id="clickPower">1</span></div>
    <div class="stat">–ü—Ä–µ—Å—Ç–∏–∂: <span id="prestigePoints">0</span></div>
  </div>
  <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
  <div id="store" class="store"></div>
  <h3>–ê–ø–≥—Ä–µ–π–¥—ã</h3>
  <div id="upgrades" class="upgrades"></div>
  <button id="prestigeBtn" style="width:100%; padding:10px; margin-bottom:20px; border-radius:10px; font-size:16px;">–ü—Ä–µ—Å—Ç–∏–∂</button>
</div>

<script>
// ======== –°–æ—Å—Ç–æ—è–Ω–∏–µ ========
let state = {
  cookies:0, totalCookies:0, clicks:0, clickPower:1,
  prestige:{points:0,multiplier:1},
  buildings:{}, upgrades:{}, lastTick:Date.now()
};

const buildingList=[
  {key:'cursor',name:'–ö—É—Ä—Å–æ—Ä',baseCost:15,baseCPS:0.1,emoji:'üñ±Ô∏è'},
  {key:'grandma',name:'–ë–∞–±—É—à–∫–∞',baseCost:100,baseCPS:1,emoji:'üëµ'},
  {key:'farm',name:'–§–µ—Ä–º–∞',baseCost:1100,baseCPS:8,emoji:'üåæ'},
  {key:'mine',name:'–®–∞—Ö—Ç–∞',baseCost:12000,baseCPS:47,emoji:'‚õèÔ∏è'},
  {key:'factory',name:'–§–∞–±—Ä–∏–∫–∞',baseCost:130000,baseCPS:260,emoji:'üè≠'},
  {key:'bank',name:'–ë–∞–Ω–∫',baseCost:1400000,baseCPS:1400,emoji:'üè¶'},
  {key:'temple',name:'–•—Ä–∞–º',baseCost:20000000,baseCPS:7800,emoji:'‚õ©Ô∏è'},
  {key:'wizard',name:'–í–æ–ª—à–µ–±–Ω–∏–∫',baseCost:330000000,baseCPS:44000,emoji:'üßô‚Äç‚ôÇÔ∏è'},
  {key:'shipment',name:'–û—Ç–≥—Ä—É–∑–∫–∞',baseCost:5100000000,baseCPS:260000,emoji:'üö¢'},
  {key:'alchemy',name:'–ê–ª—Ö–∏–º–∏—è',baseCost:75000000000,baseCPS:1600000,emoji:'‚öóÔ∏è'},
  {key:'portal',name:'–ü–æ—Ä—Ç–∞–ª',baseCost:1e12,baseCPS:10000000,emoji:'üåÄ'},
  {key:'blackhole',name:'–ß—ë—Ä–Ω–∞—è –¥—ã—Ä–∞',baseCost:1e14,baseCPS:66666666,emoji:'üåå'},
  {key:'timeMachine',name:'–ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏',baseCost:1e16,baseCPS:2e8,emoji:'‚è≥'},
  {key:'antimatter',name:'–ê–Ω—Ç–∏-–º–∞—Ç–µ—Ä–∏—è',baseCost:1e18,baseCPS:1e9,emoji:'üï≥Ô∏è'},
  {key:'quantumLab',name:'–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è',baseCost:5e19,baseCPS:5e9,emoji:'üî¨'}
];

// ======== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è ========
function initState(){
  state.buildings = {};
  buildingList.forEach(b=>{
    state.buildings[b.key]={...b, qty:0, cps:b.baseCPS, cost:b.baseCost};
  });
  const buildingKeys = Object.keys(state.buildings);
  state.upgrades = {};
  for(let i=1;i<=1000;i++){
    const type = Math.random()<0.5?'click':'building';
    let u={id:i,bought:false,type:type,multiplier:2,cost:Math.round(100*Math.pow(1.15,i))};
    if(type==='click') u.name=`–£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞ √ó2`;
    else { u.target=buildingKeys[Math.floor(Math.random()*buildingKeys.length)]; u.name=`–£–ª—É—á—à–µ–Ω–∏–µ ${u.target} √ó2`; }
    state.upgrades[i]=u;
  }
}
initState();

// ======== –ò–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ========
function fmt(n){if(n<1000) return Math.round(n*100)/100; const units=['K','M','B','T','Qa','Qi','Sx','Sp','Oc','No']; let u=-1,v=n; while(v>=1000&&u<units.length-1){v/=1000;u++;} return v.toFixed(2)+units[u];}
function clickCookie(){ state.cookies+=state.clickPower; state.totalCookies+=state.clickPower; spawnCrumb(); render(); }
function buyBuilding(key){ const b=state.buildings[key]; if(state.cookies>=b.cost){ state.cookies-=b.cost; b.qty++; b.cost=Math.round(b.baseCost*Math.pow(1.15,b.qty)); render(); } }
function buyUpgrade(id){ const u=state.upgrades[id]; if(!u.bought && state.cookies>=u.cost){ state.cookies-=u.cost; u.bought=true; if(u.type==='click') state.clickPower*=u.multiplier; if(u.type==='building') state.buildings[u.target].cps*=u.multiplier; render(); } }
function prestigeReset(){ const earned = Math.floor(Math.sqrt(state.totalCookies/1e6)); if(earned>0){ state.prestige.points += earned; state.prestige.multiplier = 1 + state.prestige.points*0.05; state.cookies=0; state.clicks=0; state.totalCookies=0; Object.values(state.buildings).forEach(b=>{ b.qty=0; b.cps=b.baseCPS; b.cost=b.baseCost; }); Object.values(state.upgrades).forEach(u=>u.bought=false); render(); } }
function getCPS(){ let cps=0; Object.values(state.buildings).forEach(b=>cps+=b.qty*b.cps); return cps*state.prestige.multiplier; }

// ======== –†–µ–Ω–¥–µ—Ä ========
function render(){
  document.getElementById('cookiesDisplay').textContent=fmt(state.cookies);
  document.getElementById('cpsDisplay').textContent=fmt(getCPS());
  document.getElementById('clickPower').textContent=fmt(state.clickPower);
  document.getElementById('prestigePoints').textContent=fmt(state.prestige.points);

  const storeDiv=document.getElementById('store'); storeDiv.innerHTML='';
  Object.values(state.buildings).forEach(b=>{
    const div=document.createElement('div'); div.className='item';
    div.innerHTML=`<div>${b.emoji} ${b.name} (${b.qty})</div><div>${fmt(b.cost)}</div><button data-key="${b.key}">–ö—É–ø–∏—Ç—å</button>`;
    storeDiv.appendChild(div);
  });

  const upgradesDiv=document.getElementById('upgrades'); upgradesDiv.innerHTML='';
  Object.values(state.upgrades).forEach(u=>{
    const div=document.createElement('div'); div.className='upgrade'+(u.bought?' bought':'');
    div.innerHTML=`<div>${u.name} (${fmt(u.cost)})</div><button data-id="${u.id}" ${u.bought?'disabled':''}>–ö—É–ø–∏—Ç—å</button>`;
    upgradesDiv.appendChild(div);
  });

  document.querySelectorAll('.item button').forEach(btn=>{
    btn.onclick=()=>buyBuilding(btn.dataset.key);
    btn.ontouchstart=()=>buyBuilding(btn.dataset.key);
  });
  document.querySelectorAll('.upgrade button').forEach(btn=>{
    btn.onclick=()=>buyUpgrade(btn.dataset.id);
    btn.ontouchstart=()=>buyUpgrade(btn.dataset.id);
  });
}

// ======== –ö—Ä–æ—à–∫–∏ ========
function spawnCrumb(){
  const cookie=document.getElementById('cookieBtn');
  const crumb=document.createElement('div'); crumb.className='crumb';
  crumb.style.left=Math.random()*140+'px';
  crumb.style.top=Math.random()*140+'px';
  cookie.appendChild(crumb);
  setTimeout(()=>crumb.remove(),600);
}

// ======== –¶–∏–∫–ª –∏–≥—Ä—ã ========
function gameTick(){
  const now=Date.now();
  const diff=(now-state.lastTick)/1000;
  state.lastTick=now;
  state.cookies+=getCPS()*diff;
  state.totalCookies+=getCPS()*diff;
  render();
  updateBackground();
}
setInterval(gameTick,100);

// ======== –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω ========
const bgImages=[
  'https://images.unsplash.com/photo-1607746882042-944635dfe10e?auto=format&fit=crop&w=1200&q=80',
  'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80',
  'https://images.unsplash.com/photo-1517832207067-4db24a2ae47c?auto=format&fit=crop&w=1200&q=80'
];
function updateBackground(){
  const total=state.totalCookies;
  let idx = Math.min(bgImages.length-1, Math.floor(Math.log10(total+1)/13*bgImages.length));
  document.body.style.background=`url(${bgImages[idx]}) no-repeat center center fixed`;
  document.body.style.backgroundSize='cover';
}

// ======== –°–æ–±—ã—Ç–∏—è ========
document.getElementById('cookieBtn').addEventListener('click',clickCookie);
document.getElementById('cookieBtn').addEventListener('touchstart',e=>{e.preventDefault(); clickCookie();});
document.getElementById('prestigeBtn').addEventListener('click',prestigeReset);
document.getElementById('prestigeBtn').addEventListener('touchstart',e=>{e.preventDefault(); prestigeReset();});

render();
</script>
