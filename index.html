<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Ultra Cookie Clicker Mobile</title>
<style>
  :root{ --bg:#1f1f2e; --card:rgba(255,255,255,0.06); --accent:#f5c24a; --accent-2:#ffd700; --text:#fff; }
  *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial; background:var(--bg); color:var(--text); overflow-x:hidden; }
  .wrap{ max-width:820px; margin:0 auto; padding:12px 12px calc(env(safe-area-inset-bottom,0) + 116px); }
  .top{ display:flex; flex-direction:column; align-items:center; gap:8px; }
  .cookie{ width:180px; height:180px; border-radius:50%; background:radial-gradient(#f6e2b3,#f0c66a); display:flex; align-items:center; justify-content:center; font-size:56px; box-shadow:0 8px 30px rgba(0,0,0,.35), 0 0 20px rgba(255,255,255,.12) inset; user-select:none; touch-action:manipulation; position:relative; }
  .cookie:active{ transform:scale(.98); }
  .crumb{ position:absolute; width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,.6); pointer-events:none; }
  .row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:10px; }
  .card{ background:var(--card); border-radius:14px; padding:10px; min-height:120px; }
  h3{ margin:0 0 8px 0; font-size:16px; opacity:.9; }
  .list{ display:flex; flex-direction:column; gap:8px; max-height:360px; overflow:auto; }
  .item,.upgrade{ display:grid; grid-template-columns:1fr auto auto; gap:8px; align-items:center; padding:8px; border-radius:10px; background:rgba(255,255,255,.04); }
  .item .meta, .upgrade .meta{ font-size:13px; opacity:.9; }
  button.buy{ background:var(--accent); border:0; border-radius:8px; padding:8px 10px; font-weight:700; color:#222; cursor:pointer; touch-action:manipulation; }
  button.buy:disabled{ filter:grayscale(1) brightness(.8); opacity:.7; cursor:not-allowed; }
  .click-number{ position:fixed; left:50%; transform:translateX(-50%); top:calc(20vh + 40px); font-weight:800; pointer-events:none; transition:all 800ms ease; opacity:1; }
  .fly{ position:fixed; bottom:-40px; left:0; font-size:18px; opacity:.75; pointer-events:none; animation:fly linear forwards; }
  @keyframes fly{ from{ transform:translateY(0) translateX(var(--x,0)); opacity:.7;} to{ transform:translateY(-120vh) translateX(calc(var(--x,0) + 40px)); opacity:0; } }
  .bar{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
  .pill{ background:var(--card); padding:6px 10px; border-radius:999px; font-weight:600; }
  .prestigeBtn{ width:100%; background:linear-gradient(180deg, var(--accent), #e5ac15); color:#222; border:0; padding:10px 12px; border-radius:10px; font-weight:800; }
  .prestigeBtn.ready{ outline:2px solid var(--accent-2); box-shadow:0 0 18px rgba(255,215,0,.5); }
  /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–Ω–∏–∑—É */
  .statsDock{ position:fixed; left:0; right:0; bottom:0; padding:8px 10px calc(env(safe-area-inset-bottom,0) + 8px); background:rgba(0,0,0,.5); backdrop-filter:blur(6px); border-top:1px solid rgba(255,255,255,.08); }
  .statsGrid{ display:grid; grid-template-columns:repeat(2,1fr); gap:8px; }
  .stat{ background:var(--card); border-radius:10px; padding:8px; font-size:13px; }
  .highlight{ color:var(--accent-2); font-weight:800; }
  /* –ú–æ–¥–∞–ª –ø—Ä–µ—Å—Ç–∏–∂–∞ */
  .modalBG{ position:fixed; inset:0; background:rgba(0,0,0,.65); display:none; align-items:center; justify-content:center; padding:16px; }
  .modal{ background:#2a2a3d; color:#fff; border-radius:14px; padding:16px; max-width:420px; width:100%; }
  .modal h4{ margin:0 0 8px; }
  .modal p{ margin:0 0 12px; opacity:.95; }
  .modal .rowBtns{ display:flex; gap:8px; }
  .modal .rowBtns button{ flex:1; padding:10px 12px; border-radius:10px; border:0; font-weight:800; }
  .yes{ background:#4caf50; color:#fff; }
  .no{ background:#f44336; color:#fff; }
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div id="cookieBtn" class="cookie" title="–ñ–º–∏!">üç™</div>
    <div class="bar">
      <div class="pill">–ü–µ—á–µ–Ω—å–∫–∏: <span id="cookies">0</span></div>
      <div class="pill">CPS: <span id="cps">0</span></div>
      <div class="pill">–ö–ª–∏–∫: <span id="clickPower">1</span></div>
      <div class="pill">–ó–æ–ª–æ—Ç—ã–µ: <span id="gold">0</span></div>
    </div>
  </div>

  <div class="row">
    <div class="card">
      <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
      <div id="store" class="list"></div>
    </div>
    <div class="card">
      <h3>–ê–ø–≥—Ä–µ–π–¥—ã (—Å–ª–µ–¥—É—é—â–∏–µ)</h3>
      <div id="upgrades" class="list"></div>
    </div>
  </div>

  <div style="margin-top:12px;">
    <button id="prestigeBtn" class="prestigeBtn">–ü—Ä–µ—Å—Ç–∏–∂</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª –ø—Ä–µ—Å—Ç–∏–∂–∞ -->
<div id="prestigeModal" class="modalBG">
  <div class="modal">
    <h4>–°–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂?</h4>
    <p id="prestigeText">–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂, –Ω–∞–∫–æ–ø–∏—Ç–µ 1 —Ç—Ä–ª–Ω –ø–µ—á–µ–Ω–µ–∫ –∑–∞ —Ç–µ–∫—É—â–∏–π –∑–∞–±–µ–≥. –ó–∞ –∫–∞–∂–¥—ã–π —Ç—Ä–ª–Ω –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 1 <span class="highlight">–∑–æ–ª–æ—Ç—É—é –ø–µ—á–µ–Ω—å–∫—É</span>, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–≤—Å–µ–≥–¥–∞ –¥–∞—ë—Ç +0.1% –∫ CPS –∏ –∫–ª–∏–∫—É. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?</p>
    <div class="rowBtns">
      <button id="prestigeYes" class="yes">–î–∞</button>
      <button id="prestigeNo" class="no">–ù–µ—Ç</button>
    </div>
  </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫ -->
<div class="statsDock">
  <div class="statsGrid">
    <div class="stat">–¢–µ–∫—É—â–∏–π –∑–∞–±–µ–≥: <span id="runTime">0—Å</span></div>
    <div class="stat">–í—Å–µ–≥–æ –∑–∞ –∑–∞–±–µ–≥: <span id="totalRun">0</span></div>
    <div class="stat">–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: <span id="clicks">0</span></div>
    <div class="stat">–í—Å–µ–≥–æ –ø—Ä–µ—Å—Ç–∏–∂–∞: <span id="prestiges">0</span></div>
    <div class="stat">–í—Å–µ–≥–æ –ø–µ—á–µ–Ω–µ–∫ (–≤—Å–µ –∑–∞–±–µ–≥–∏): <span id="overallCookies">0</span></div>
    <div class="stat">–ó–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å–∫–∏ (–≤—Å–µ–≥–æ): <span id="overallGold">0</span></div>
  </div>
</div>

<script>
/* ========= –°–æ—Å—Ç–æ—è–Ω–∏–µ ========= */
const state = {
  cookies: 0,
  totalCookies: 0,          // –∑–∞ —Ç–µ–∫—É—â–∏–π –∑–∞–±–µ–≥
  clicks: 0,
  clickPower: 1,
  goldCookies: 0,           // –Ω–∞–≤—Å–µ–≥–¥–∞
  buildings: {},
  lastTick: Date.now(),
  startTime: Date.now(),
  overall: {
    totalCookies: 0,        // –Ω–∞–∫–æ–ø–ª–µ–Ω–æ –ø—Ä–∏ –ø—Ä–µ—Å—Ç–∏–∂–µ
    totalGold: 0,
    prestiges: 0,
    totalTime: 0,
    clicks: 0
  }
};

const buildingList = [
  {key:'cursor', name:'–ö—É—Ä—Å–æ—Ä', emoji:'üñ±Ô∏è', baseCost:15, baseCPS:0.1,
    upgrades:['–°–º–∞–∑–∞–Ω–Ω—ã–µ —à–∞—Ä–Ω–∏—Ä—ã','–õ–∞–∑–µ—Ä–Ω—ã–π –ø—Ä–∏—Ü–µ–ª','–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä','–ù–µ–π—Ä–æ-–∫—É—Ä—Å–æ—Ä—ã','–ö–≤–∞–Ω—Ç–æ–≤–∞—è –º—ã—à—å','–§–∞–∑–æ–≤—ã–π –ª—É—á','–ì–∏—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏–π —à–∞—Ä','–ü–∏–∫—Å–µ–ª—å–Ω—ã–π —Å–ª–µ–¥','–¢—É—Ä–±–æ-—Å–∫—Ä–æ–ª–ª','–ì–∏–ø–µ—Ä–∫–ª–∏–∫']},
  {key:'grandma', name:'–ë–∞–±—É—à–∫–∞', emoji:'üëµ', baseCost:100, baseCPS:1,
    upgrades:['–ë–∞–±—É—à–∫–∏–Ω—ã –æ—á–∫–∏','–î–≤–æ–π–Ω—ã–µ —Å–ø–∏—Ü—ã','–ü–µ—á—å –Ω–∞ —É–≥–ª–µ','–°—É–ø–µ—Ä–∑–∞–º–µ—Å','–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –≤–∞—Ä–µ–Ω—å–µ','–î—É—Ö–æ–≤–∫–∞-–≥–∏–≥–∞–Ω—Ç','–ß—É–≥—É–Ω–Ω—ã–π –ª–∏—Å—Ç','–ë—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä—á–∞—Ç–∫–∏','–°–≤–µ—Ä—Ö–¥—Ä–æ–∂–∂–∏','–°–µ—Ä–¥—Ü–µ –ø–µ–∫–∞—Ä—è']},
  {key:'farm', name:'–§–µ—Ä–º–∞', emoji:'üåæ', baseCost:1100, baseCPS:8,
    upgrades:['–£–¥–æ–±—Ä–µ–Ω–∏–µ +10','–ì–ú–û-–ø–µ—á–µ–Ω—å–∫–∏','–ú–µ–≥–∞-—Ç—Ä–∞–∫—Ç–æ—Ä','–§–µ—Ä–º–∞-—Ä–æ–±–æ—Ç','–î–æ–∂–¥–µ–≤–∞–Ω–∏–µ 2.0','–£–ª—å—Ç—Ä–∞—Å–µ–º–µ–Ω–∞','–°–æ–ª–Ω–µ—á–Ω—ã–µ –≥—Ä—è–¥–∫–∏','–¢—ë–ø–ª—ã–µ —Ç–µ–ø–ª–∏—Ü—ã','–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–ª–∏–º–∞—Ç–∞','–ì–∏–¥—Ä–æ–ø–æ–Ω–∏–∫–∞']},
  {key:'mine', name:'–®–∞—Ö—Ç–∞', emoji:'‚õèÔ∏è', baseCost:12000, baseCPS:47,
    upgrades:['–ö–∞–º–µ–Ω–Ω—ã–π —É–≥–æ–ª—å','–ñ–µ–ª–µ–∑–Ω–∞—è –ø–µ—á—å','–ê–ª–º–∞–∑–Ω—ã–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏','–¢–∏—Ç–∞–Ω–æ–≤—ã–µ –≤–∞–≥–æ–Ω–µ—Ç–∫–∏','–ê–≤—Ç–æ–∫—Ä–µ–ø–∏','–í–∏–±—Ä–æ–ø–æ–≥—Ä—É–∑–∫–∞','–ü–ª–∞–∑–º–µ–Ω–Ω—ã–π —Ñ–∞–∫–µ–ª','–ö–∞—Ä–∞–≤–∞–Ω —Ä—É–¥—ã','–°–º–∞—Ä—Ç-–ø–æ–¥–∑–µ–º–µ–ª—å—è','–ú–∞–≥–Ω–∏—Ç–æ-—Å–µ–ø–∞—Ä–∞—Ç–æ—Ä']},
  {key:'factory', name:'–§–∞–±—Ä–∏–∫–∞', emoji:'üè≠', baseCost:130000, baseCPS:260,
    upgrades:['–ö–æ–Ω–≤–µ–π–µ—Ä XL','–°–≤–µ—Ä—Ö–ø–µ—á—å','–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è','–ö–∏–±–µ—Ä-—Ñ–∞–±—Ä–∏–∫–∞','–†–æ–±–æ—Ä—É–∫–∏','–ù—É–ª–µ–≤–æ–π –ø—Ä–æ—Å—Ç–æ–π','3D-—Ñ–æ—Ä–º—ã','–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –û–¢–ö','–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞','–ù—É–ª–µ–≤—ã–µ –æ—Ç—Ö–æ–¥—ã']},
  {key:'bank', name:'–ë–∞–Ω–∫', emoji:'üè¶', baseCost:1400000, baseCPS:1400,
    upgrades:['–°–ª–∞–¥–∫–∏–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏','–°—Ç–∞–≤–∫–∞ —Å–∞—Ö–∞—Ä–∞','–®–æ–∫–æ–ª–∞–¥–Ω—ã–µ –∞–∫—Ç–∏–≤—ã','–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤','–ú–∞—Ä—à—Ä—É—Ç –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏','–ê–Ω—Ç–∏–∏–Ω—Ñ–ª—è—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–æ','–î–∏–≤–∏–¥–µ–Ω–¥ –º—É–∫–∏','–¢—Ä–∞—Å—Ç —Ö—Ä—É—Å—Ç–∏–Ω–æ–∫','–õ–µ–≤–µ—Ä–∏–¥–∂ –ø–µ—á–µ–Ω—å—è','–ê–ª–≥–æ—Ä–∏—Ç–º –¥–æ—Ö–æ–¥–∞']},
  {key:'temple', name:'–•—Ä–∞–º', emoji:'‚õ©Ô∏è', baseCost:20000000, baseCPS:7800,
    upgrades:['–•–æ—Ä –ø–µ–∫–∞—Ä–µ–π','–ü—Å–∞–ª–º—ã —Å –∫–æ—Ä–∏—Ü–µ–π','–ñ–µ—Ä—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—á–µ–Ω—å—è','–°–≤—è—Ç–∞—è –≤—ã–ø–µ—á–∫–∞','–ú–æ–ª–∏—Ç–≤–∞ –¥—Ä–æ–∂–∂–∞–º','–ó–≤–æ–Ω –∫–∞—Ä–∞–º–µ–ª–∏','–ê–ª—Ç–∞—Ä—å –≥–ª—é—Ç–µ–Ω–∞','–ö—É–ø–æ–ª —Å–∞—Ö–∞—Ä–∞','–ò–∫–æ–Ω–∞ –Ω–∞—á–∏–Ω–∫–∏','–ß—É–¥–æ —Ä–∞—Å—Å—Ç–æ–π–∫–∏']},
  {key:'wizard', name:'–í–æ–ª—à–µ–±–Ω–∏–∫', emoji:'üßô‚Äç‚ôÇÔ∏è', baseCost:330000000, baseCPS:44000,
    upgrades:['–ú–∞–≥–∏—è —Ç–µ—Å—Ç–∞','–ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –¥—Ä–æ–∂–∂–µ–π','–ö–Ω–∏–≥–∞ –ø–µ—á–µ–Ω–∏–π','–ê—Ä—Ö–∏–º–∞–≥-–∫—É–ª–∏–Ω–∞—Ä','–ñ–µ–∑–ª –∫–∞—Ä–∞–º–µ–ª–∏','–ú–∞–Ω–Ω–∞ –ø–µ—á–µ–Ω—å—è','–ö—Ä–∏—Ç –º–∞–≥–∏–∏ –≤–∫—É—Å–∞','–°–≤–∏—Ç–æ–∫ –º—É–∫–∏','–ú–∏—Ä—Ä–∞ –≤–∞–Ω–∏–ª–∏','–°—Ñ–µ—Ä–∞ —Å–∞—Ö–∞—Ä–∞']},
  {key:'shipment', name:'–û—Ç–≥—Ä—É–∑–∫–∞', emoji:'üö¢', baseCost:5100000000, baseCPS:260000,
    upgrades:['–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –¥—É—Ö–æ–≤–∫–∞','–õ—É–Ω–Ω—ã–µ –∫–æ—Ä–æ–≤—ã','–ú–∞—Ä—Å–∏–∞–Ω—Å–∫–∞—è –º—É–∫–∞','–Æ–ø–∏—Ç–µ—Ä—Å–∫–∏–π –∂–∞—Ä','–ö–æ—Å–º–æ-—Ö–æ–ª–æ–¥','–§–ª–æ—Ç –ø—Ä—è–Ω–∏–∫–æ–≤','–ü–∏–ª–æ—Ç—ã-–∞–Ω–¥—Ä–æ–∏–¥—ã','–ê—Å—Ç–µ—Ä–æ–∏–¥–Ω—ã–π –º—É–∫–æ–º–æ–ª','–û—Ä–±–∏—Ç–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥','–°–≤–µ—Ç–æ–≤–æ–π —Ç—Ä—é–º']},
  {key:'alchemy', name:'–ê–ª—Ö–∏–º–∏—è', emoji:'‚öóÔ∏è', baseCost:75000000000, baseCPS:1600000,
    upgrades:['–ö–∞–º–µ–Ω—å –≤ –ø–µ—á–µ–Ω—å–µ','–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è –ø–µ—á–µ–Ω—å–∫–∞','–ó–æ–ª–æ—Ç–∞—è –∫—Ä–æ—à–∫–∞','–ê–ª—Ö–∏–º—Ä–µ–∞–∫—Ç–æ—Ä','–¢—Ä–∞–Ω—Å–º—É—Ç–∞—Ü–∏—è —Å–∞—Ö–∞—Ä–∞','–ê–º–±—Ä–æ–∑–∏—è','–≠—Å—Å–µ–Ω—Ü–∏—è —Ç–µ—Å—Ç–∞','–°—É–±–ª–∏–º–∞—Ü–∏—è –º—É–∫–∏','–õ–∞–ø–∏—Å –ø–µ—á–µ–Ω—å–∫–∞','–ê—Ä–∫–∞–Ω–∞ –≤–∞–Ω–∏–ª–∏']},
  {key:'portal', name:'–ü–æ—Ä—Ç–∞–ª', emoji:'üåÄ', baseCost:1e12, baseCPS:1e7,
    upgrades:['–¢–æ–Ω–Ω–µ–ª—å –≤ —Å–ª–∞–¥–æ—Å—Ç—å','–ë–∏—Å–∫–≤–∏—Ç–Ω—ã–π —Ä–∞–∑–ª–æ–º','–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –¥—É—Ö–æ–≤–∫–∞','–ó–∞–∑–µ—Ä–∫–∞–ª—å–µ —Å–∞—Ö–∞—Ä–∞','–ö—Ä–∏–≤–∏–∑–Ω–∞ –≤–∫—É—Å–∞','–ó–∞–º–µ—Å –≤–Ω–µ –≤—Ä–µ–º–µ–Ω–∏','–†–æ–≥ –∏–∑–æ–±–∏–ª–∏—è','–ü–æ—Ä—Ç –æ–º–µ–≥–∏','–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–π','–°–ª–∞–¥–∫–∏–π —Ñ—Ä–æ–Ω—Ç–∏—Ä']},
  {key:'blackhole', name:'–ß—ë—Ä–Ω–∞—è –¥—ã—Ä–∞', emoji:'üåå', baseCost:1e14, baseCPS:6.666e7,
    upgrades:['–¢—ë–º–Ω–æ–µ —Ç–µ—Å—Ç–æ','–°–∏–Ω–≥—É–ª—è—Ä–Ω–∞—è –ø–µ—á—å','–ì—Ä–∞–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—Ä–æ—à–∫–∞','–ì–æ—Ä–∏–∑–æ–Ω—Ç –≤–∫—É—Å–∞','–ê–∫–∫—Ä–µ—Ü–∏–æ–Ω–Ω—ã–π —Å–æ—É—Å','–ê–Ω–∞–ª–æ–≥ –•–æ–∫–∏–Ω–≥–∞','–ö–æ–ª—å—Ü–æ –≥–ª—é—Ç–µ–Ω–∞','–ü–æ—Ç–æ–∫ –∫–∞—Ä–∞–º–µ–ª–∏','–°–ª–∞–¥–∫–∞—è —Ç–µ–Ω—å','–ü–µ–∫–∞—Ä—Å–∫–∏–π –∫–≤–∞–∑–∞—Ä']},
  {key:'timeMachine', name:'–ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏', emoji:'‚è≥', baseCost:1e16, baseCPS:2e8,
    upgrades:['–•–ª–µ–± –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ','–î—Ä–æ–∂–∂–∏ –±—É–¥—É—â–µ–≥–æ','–¶–∏–∫–ª —Ç–µ—Å—Ç–∞','–ü–∞—Ä–∞–¥–æ–∫—Å –¥—É—Ö–æ–≤–∫–∏','–í–µ—á–Ω–∞—è —Ä–∞—Å—Å—Ç–æ–π–∫–∞','–õ–µ–Ω—Ç–∞ –ø–µ—á–µ–Ω—å—è','–•—Ä–æ–Ω–æ-–∑–∞–º–µ—Å','–†–µ—Ç—Ä–æ–∫–∞—Ä–∞–º–µ–ª—å','–ü–µ—Ç–ª—è —Å–∞—Ö–∞—Ä–∞','–ù–µ–∫—Å—É—Å –≤–∫—É—Å–∞']},
  {key:'antimatter', name:'–ê–Ω—Ç–∏-–º–∞—Ç–µ—Ä–∏—è', emoji:'üï≥Ô∏è', baseCost:1e18, baseCPS:1e9,
    upgrades:['–í–∞–∫—É—É–º–Ω—ã–π —Å–∞—Ö–∞—Ä','–ò–Ω–≤–µ—Ä—Å–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ','–ê–Ω—Ç–∏-—Ç–µ—Å—Ç–æ','–ù—É–ª—å-–Ω–∞—á–∏–Ω–∫–∞','–ö—Ä–∞—Ö –≤—Å–µ–ª–µ–Ω–Ω–æ–π','–ó–µ—Ä–∫–∞–ª—å–Ω–∞—è –º—É–∫–∞','–ö–æ–Ω—Ç—Ä-–≥–ª–∞–∑—É—Ä—å','–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ—Ä–∏—Ü–∞','–¢—å–º–∞ –∫–∞–ª–æ—Ä–∏–π','–°–ª–∞–¥–∫–∏–π —Ä–∞–∑—Ä—è–¥']},
  {key:'quantumLab', name:'–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±.', emoji:'üî¨', baseCost:5e19, baseCPS:5e9,
    upgrades:['–ö–≤–∞–Ω—Ç–æ–≤–∞—è –º—É–∫–∞','–ù–∞–Ω–æ–ø–µ—á–µ–Ω—å–µ','–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è —Ç–µ—Å—Ç–∞','–≠–Ω—Ç–∞–Ω–≥–ª-—Å–∞—Ö–∞—Ä','–¢—É–Ω–Ω–µ–ª—å–Ω–∞—è –≥–ª–∞–∑—É—Ä—å','–î–µ–∫–æ–≥–µ—Ä–µ–Ω—Ü-–≤—ã–ø–µ—á–∫–∞','–ö–≤–∞—Ä–∫–æ–≤–∞—è –∫—Ä–æ—à–∫–∞','–õ–µ–ø—Ç–æ–Ω–Ω—ã–π –ª–∏—Å—Ç','–ì–∏–≥–∞–º–µ—à–∞–ª–∫–∞','–ö–æ–ª–ª–∞–ø—Å –≤–∫—É—Å–∞']},
];

const clickUpgradeNames = [
  '–ú–∞—Å–ª–æ –Ω–∞ –ø–∞–ª—å—Ü–∞—Ö','–°–∏–ª–∞ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞','–¢–∏—Ç–∞–Ω–æ–≤—ã–π –ø–∞–ª–µ—Ü','–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–∫',
  '–ü—É–ª—å—Å —É—Å–∫–æ—Ä–µ–Ω–∏—è','–ì–∏–ø–µ—Ä—Ç—ã—á–æ–∫','–¢—É—Ä–±–æ-—Ç–∞–ø','–ö—Ä–∏—Ç –∫–ª–∏–∫','–£–¥–∞—Ä —Ö—Ä—É—Å—Ç–æ–º','–î–ª–∞–Ω—å –ø–µ—á–µ–Ω—å—è'
];

/* ========= –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ========= */
function init(){
  // –∑–¥–∞–Ω–∏—è
  state.buildings = {};
  for(const b of buildingList){
    state.buildings[b.key] = {
      ...b,
      qty: 0,
      cps: b.baseCPS,
      cost: b.baseCost,
      nextUp: { level: 1, // –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ √ó2
                cost: b.baseCost * 10, // —Å—Ç–∞—Ä—Ç –∞–ø–≥—Ä–µ–π–¥–∞
                nameIdx: 0 }
    };
  }
  // –∫–ª–∏–∫-–∞–ø–≥—Ä–µ–π–¥
  state.clickUp = { level:1, cost: 15*10, nameIdx:0 }; // —Å—Ç–∞—Ä—Ç 150
}
init();

/* ========= –£—Ç–∏–ª–∏—Ç—ã ========= */
function fmt(n){
  if(n >= 1e18) return (n/1e18).toFixed(2)+'E';
  if(n >= 1e15) return (n/1e15).toFixed(2)+'P';
  if(n >= 1e12) return (n/1e12).toFixed(2)+'T';
  if(n >= 1e9)  return (n/1e9 ).toFixed(2)+'B';
  if(n >= 1e6)  return (n/1e6 ).toFixed(2)+'M';
  if(n >= 1e3)  return (n/1e3 ).toFixed(1)+'K';
  return Math.floor(n);
}
function goldMult(){ return 1 + state.goldCookies * 0.001; } // +0.1% –∑–∞ –∑–æ–ª. –ø–µ—á–µ–Ω—å–∫—É
function getCPS(){
  let cps = 0;
  for(const b of Object.values(state.buildings)) cps += b.qty * b.cps;
  return cps * goldMult();
}

/* ========= –†–µ–Ω–¥–µ—Ä ========= */
function render(){
  // —à–∞–ø–∫–∞
  document.getElementById('cookies').textContent = fmt(state.cookies);
  document.getElementById('cps').textContent = fmt(getCPS());
  document.getElementById('clickPower').textContent = fmt(state.clickPower * goldMult());
  document.getElementById('gold').textContent = fmt(state.goldCookies);

  // –º–∞–≥–∞–∑–∏–Ω
  const store = document.getElementById('store');
  store.innerHTML = '';
  for(const b of Object.values(state.buildings)){
    const div = document.createElement('div');
    div.className = 'item';
    const can = state.cookies >= b.cost;
    div.style.background = can ? 'rgba(0,200,0,.18)' : 'rgba(255,255,255,.04)';
    div.innerHTML = `
      <div><strong>${b.emoji} ${b.name}</strong> <span class="meta">(${b.qty}) ¬∑ +${fmt(b.cps)} CPS/—à—Ç</span></div>
      <div class="meta">${fmt(b.cost)}</div>
      <button class="buy" ${can?'':'disabled'} data-key="${b.key}">–ö—É–ø–∏—Ç—å</button>
    `;
    const btn = div.querySelector('button.buy');
    btn.addEventListener('pointerdown', (e)=>{ e.preventDefault(); buyBuilding(b.key); }, {passive:false});
    store.appendChild(div);
  }

  // –∞–ø–≥—Ä–µ–π–¥—ã (—Ç–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â–∏–µ)
  renderUpgrades();

  // –ø—Ä–µ—Å—Ç–∏–∂ –≥–æ—Ç–æ–≤?
  const canPrestige = Math.floor(state.totalCookies / 1e12) > 0;
  const pBtn = document.getElementById('prestigeBtn');
  pBtn.classList.toggle('ready', canPrestige);

  // —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫
  const tSec = Math.floor((Date.now()-state.startTime)/1000);
  document.getElementById('runTime').textContent = tSec<60 ? `${tSec}—Å` : `${Math.floor(tSec/60)}–º ${tSec%60}—Å`;
  document.getElementById('totalRun').textContent = fmt(state.totalCookies);
  document.getElementById('clicks').textContent = fmt(state.clicks);
  document.getElementById('prestiges').textContent = state.overall.prestiges;
  document.getElementById('overallCookies').textContent = fmt(state.overall.totalCookies);
  document.getElementById('overallGold').textContent = fmt(state.overall.totalGold);
}

function renderUpgrades(){
  const list = document.getElementById('upgrades');
  list.innerHTML = '';

  // –∞–ø–≥—Ä–µ–π–¥ –∫–ª–∏–∫–∞ (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω)
  const cu = state.clickUp;
  const cuName = clickUpgradeNames[Math.min(cu.nameIdx, clickUpgradeNames.length-1)];
  const cuCost = cu.cost;
  const cuCan = state.cookies >= cuCost;
  const cuDiv = document.createElement('div');
  cuDiv.className = 'upgrade';
  cuDiv.innerHTML = `
    <div><strong>${cuName}</strong> <span class="meta">–ö–ª–∏–∫ √ó${cu.level+1}</span></div>
    <div class="meta">${fmt(cuCost)}</div>
    <button class="buy" ${cuCan?'':'disabled'} data-type="click">–ö—É–ø–∏—Ç—å</button>
  `;
  cuDiv.querySelector('button').addEventListener('pointerdown', (e)=>{ e.preventDefault(); buyClickUpgrade(); }, {passive:false});
  list.appendChild(cuDiv);

  // –∞–ø–≥—Ä–µ–π–¥—ã –∑–¥–∞–Ω–∏–π ‚Äî –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–µ–¥—É—é—â–µ–º—É –Ω–∞ –∫–∞–∂–¥–æ–µ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ qty>0
  for(const b of Object.values(state.buildings)){
    if(b.qty <= 0) continue;
    const uLevel = b.nextUp.level; // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º √ó(level+1)
    const name = b.upgrades[Math.min(b.nextUp.nameIdx, b.upgrades.length-1)];
    const cost = b.nextUp.cost;
    const can = state.cookies >= cost;

    const div = document.createElement('div');
    div.className = 'upgrade';
    div.innerHTML = `
      <div><strong>${name}</strong> <span class="meta">${b.name} √ó${uLevel+1}</span></div>
      <div class="meta">${fmt(cost)}</div>
      <button class="buy" ${can?'':'disabled'} data-up="${b.key}">–ö—É–ø–∏—Ç—å</button>
    `;
    div.querySelector('button').addEventListener('pointerdown', (e)=>{ e.preventDefault(); buyBuildingUpgrade(b.key); }, {passive:false});
    list.appendChild(div);
  }
}

/* ========= –õ–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏ ========= */
function buyBuilding(key){
  const b = state.buildings[key];
  if(state.cookies < b.cost) return;
  state.cookies -= b.cost;
  b.qty++;
  b.cost = Math.round(b.cost * 1.15);
  pulseCookie();
  render();
}

function buyBuildingUpgrade(key){
  const b = state.buildings[key];
  const u = b.nextUp;
  if(state.cookies < u.cost) return;

  state.cookies -= u.cost;

  // –≠—Ñ—Ñ–µ–∫—Ç: √ó2 –∫ cps –∑–¥–∞–Ω–∏—è
  b.cps *= 2;

  // –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∞–ø–≥—Ä–µ–π–¥
  u.level += 1;
  u.nameIdx = Math.min(u.nameIdx + 1, (b.upgrades.length-1));
  u.cost = nextUpgradeCost(u.cost);

  burst('+UP!', 0, -30);
  render();
}

function buyClickUpgrade(){
  const u = state.clickUp;
  if(state.cookies < u.cost) return;
  state.cookies -= u.cost;

  // –≠—Ñ—Ñ–µ–∫—Ç: √ó2 –∫ –∫–ª–∏–∫—É
  state.clickPower *= 2;

  u.level += 1;
  u.nameIdx = Math.min(u.nameIdx + 1, (clickUpgradeNames.length-1));
  u.cost = nextUpgradeCost(u.cost);

  burst('+–ö–õ–ò–ö!', 0, -30);
  render();
}

/* ========= –§–æ—Ä–º—É–ª–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–ø–≥—Ä–µ–π–¥–∞ =========
   –Ω–æ–≤–∞—è–¶–µ–Ω–∞ = (–ø—Ä–µ–¥—ã–¥—É—â–∞—è + 10) √ó (1.7 ‚Ä¶ 2.2)
*/
function nextUpgradeCost(prev){
  const mult = 1.7 + Math.random()*0.5; // 70%‚Äì120% —Å–≤–µ—Ä—Ö—É
  return Math.max(1, Math.round( (prev + 10) * mult ));
}

/* ========= –ü—Ä–µ—Å—Ç–∏–∂ ========= */
function tryPrestige(){
  const earned = Math.floor(state.totalCookies / 1e12);
  const modal = document.getElementById('prestigeModal');
  const pText = document.getElementById('prestigeText');
  if(earned <= 0){
    pText.innerHTML = '–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂, –Ω–∞–∫–æ–ø–∏—Ç–µ <span class="highlight">1 —Ç—Ä–ª–Ω</span> –ø–µ—á–µ–Ω–µ–∫ –∑–∞ —Ç–µ–∫—É—â–∏–π –∑–∞–±–µ–≥. –ó–∞ –∫–∞–∂–¥—ã–π —Ç—Ä–ª–Ω –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 1 <span class="highlight">–∑–æ–ª–æ—Ç—É—é –ø–µ—á–µ–Ω—å–∫—É</span> (+0.1% –∫–æ –≤—Å–µ–º –¥–æ—Ö–æ–¥–∞–º).';
  } else {
    pText.innerHTML = `–í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç–µ <span class="highlight">${earned}</span> –∑–æ–ª–æ—Ç. –ø–µ—á–µ–Ω–µ–∫ (–∏—Ç–æ–≥–æ –±–æ–Ω—É—Å: +${(earned*0.1).toFixed(1)}%). –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ—Å—Ç–∏–∂?`;
  }
  modal.style.display = 'flex';
}

function doPrestige(){
  const earned = Math.floor(state.totalCookies / 1e12);
  const modal = document.getElementById('prestigeModal');
  if(earned > 0){
    state.goldCookies += earned;
    state.overall.totalGold += earned;
  }
  // –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –≤ –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
  state.overall.totalCookies += state.totalCookies;
  state.overall.totalTime += (Date.now() - state.startTime);
  state.overall.clicks += state.clicks;
  state.overall.prestiges += 1;

  // —Å–±—Ä–æ—Å –∑–∞–±–µ–≥–∞
  state.cookies = 0;
  state.totalCookies = 0;
  state.clicks = 0;
  state.clickPower = 1;
  state.startTime = Date.now();
  for(const b of Object.values(state.buildings)){
    b.qty = 0;
    b.cps = b.baseCPS;
    b.cost = b.baseCost;
    b.nextUp = { level:1, cost:b.baseCost*10, nameIdx:0 };
  }
  state.clickUp = { level:1, cost:15*10, nameIdx:0 };
  modal.style.display = 'none';
  render();
}

/* ========= –ö–ª–∏–∫–∏/–∞–Ω–∏–º–∞—Ü–∏–∏ ========= */
function clickCookie(){
  const gain = state.clickPower * goldMult();
  state.cookies += gain;
  state.totalCookies += gain;
  state.clicks++;
  floatingNum('+'+fmt(gain));
  spawnCrumb();
  spawnFly();
  pulseCookie();
  render();
}

function pulseCookie(){
  const node = document.getElementById('cookieBtn');
  node.style.transition = 'transform .08s';
  node.style.transform = 'scale(1.06)';
  setTimeout(()=>{ node.style.transform = 'scale(1)'; }, 80);
}
function floatingNum(text){
  const n = document.createElement('div');
  n.className = 'click-number';
  n.textContent = text;
  document.body.appendChild(n);
  requestAnimationFrame(()=>{
    n.style.transform = 'translate(-50%, -28px)';
    n.style.opacity = '0';
  });
  setTimeout(()=> n.remove(), 820);
}
function spawnCrumb(){
  const c = document.createElement('div'); c.className='crumb';
  const host = document.getElementById('cookieBtn');
  c.style.left = (20 + Math.random()*140) + 'px';
  c.style.top  = (20 + Math.random()*140) + 'px';
  host.appendChild(c);
  setTimeout(()=>c.remove(), 600);
}
function spawnFly(){
  const e = document.createElement('div'); e.className='fly'; e.textContent='üç™';
  e.style.left = (Math.random()*100)+'vw';
  e.style.setProperty('--x', (Math.random()*40-20)+'px');
  e.style.animationDuration = (5 + Math.random()*5)+'s';
  document.body.appendChild(e);
  setTimeout(()=>e.remove(), 10000);
}

/* ========= –°–æ–±—ã—Ç–∏—è (Pointer Events –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) ========= */
document.getElementById('cookieBtn').addEventListener('pointerdown', (e)=>{ e.preventDefault(); clickCookie(); }, {passive:false});
document.getElementById('prestigeBtn').addEventListener('pointerdown', (e)=>{ e.preventDefault(); tryPrestige(); }, {passive:false});
document.getElementById('prestigeNo').addEventListener('pointerdown', (e)=>{ e.preventDefault(); document.getElementById('prestigeModal').style.display='none'; }, {passive:false});
document.getElementById('prestigeYes').addEventListener('pointerdown', (e)=>{ e.preventDefault(); doPrestige(); }, {passive:false});

/* ========= –¶–∏–∫–ª CPS ========= */
setInterval(()=>{
  const now = Date.now();
  const dt = (now - state.lastTick)/1000;
  state.lastTick = now;

  const gain = getCPS() * dt;
  state.cookies += gain;
  state.totalCookies += gain;

  render();
}, 100);

/* ========= –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä ========= */
render();
</script>
</body>
</html>
