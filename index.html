<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Cookie Clicker</title>
<style>
body { margin:0; font-family:sans-serif; background:#1f1f2e; color:white; transition:background 1s ease; }
.wrap { display:flex; gap:16px; max-width:1200px; margin:0 auto; padding:16px; }
.left { flex:1; display:flex; flex-direction:column; align-items:center; }
.cookie { width:200px; height:200px; border-radius:50%; background:linear-gradient(145deg,#f6e2b3,#f0c66a); display:flex; align-items:center; justify-content:center; font-size:48px; cursor:pointer; position:relative; }
.crumb { position:absolute; border-radius:50%; width:10px; height:10px; background:rgba(255,255,255,0.6); }
.stats { display:flex; gap:12px; margin-top:10px; flex-wrap:wrap; }
.stat { background:rgba(255,255,255,0.1); padding:6px 10px; border-radius:6px; font-size:14px; }
.right { width:400px; display:flex; flex-direction:column; gap:12px; }
.store, .upgrades { display:flex; flex-direction:column; gap:6px; max-height:300px; overflow-y:auto; }
.item, .upgrade { display:flex; justify-content:space-between; padding:6px 10px; background:rgba(255,255,255,0.05); border-radius:6px; }
.item button, .upgrade button { background:#f5c24a; border:0; border-radius:6px; cursor:pointer; padding:4px 8px; color:#222; font-weight:700; }
.upgrade.bought { opacity:0.5; }
</style>
</head>
<body>
<div class="wrap">
  <div class="left">
    <div id="cookieBtn" class="cookie">üç™</div>
    <div class="stats">
      <div class="stat">–ü–µ—á–µ–Ω—å–∫–∏: <span id="cookiesDisplay">0</span></div>
      <div class="stat">CPS: <span id="cpsDisplay">0</span></div>
      <div class="stat">–ö–ª–∏–∫: <span id="clickPower">1</span></div>
      <div class="stat">–ü—Ä–µ—Å—Ç–∏–∂: <span id="prestigePoints">0</span></div>
    </div>
  </div>
  <div class="right">
    <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
    <div id="store" class="store"></div>
    <h3>–ê–ø–≥—Ä–µ–π–¥—ã</h3>
    <div id="upgrades" class="upgrades"></div>
    <button id="prestigeBtn">–ü—Ä–µ—Å—Ç–∏–∂</button>
  </div>
</div>

<script>
// ======== –°–æ—Å—Ç–æ—è–Ω–∏–µ ========
let state = {
  cookies:0, totalCookies:0, clicks:0, clickPower:1,
  prestige:{points:0,multiplier:1},
  buildings:{}, upgrades:{}, lastTick:Date.now()
};

const buildingList=[
  {key:'cursor',name:'–ö—É—Ä—Å–æ—Ä',baseCost:15,baseCPS:0.1,emoji:'üñ±Ô∏è'},
  {key:'grandma',name:'–ë–∞–±—É—à–∫–∞',baseCost:100,baseCPS:1,emoji:'üëµ'},
  {key:'farm',name:'–§–µ—Ä–º–∞',baseCost:1100,baseCPS:8,emoji:'üåæ'},
  {key:'mine',name:'–®–∞—Ö—Ç–∞',baseCost:12000,baseCPS:47,emoji:'‚õèÔ∏è'},
  {key:'factory',name:'–§–∞–±—Ä–∏–∫–∞',baseCost:130000,baseCPS:260,emoji:'üè≠'},
  {key:'bank',name:'–ë–∞–Ω–∫',baseCost:1400000,baseCPS:1400,emoji:'üè¶'},
  {key:'temple',name:'–•—Ä–∞–º',baseCost:20000000,baseCPS:7800,emoji:'‚õ©Ô∏è'},
  {key:'wizard',name:'–í–æ–ª—à–µ–±–Ω–∏–∫',baseCost:330000000,baseCPS:44000,emoji:'üßô‚Äç‚ôÇÔ∏è'},
  {key:'shipment',name:'–û—Ç–≥—Ä—É–∑–∫–∞',baseCost:5100000000,baseCPS:260000,emoji:'üö¢'},
  {key:'alchemy',name:'–ê–ª—Ö–∏–º–∏—è',baseCost:75000000000,baseCPS:1600000,emoji:'‚öóÔ∏è'},
  {key:'portal',name:'–ü–æ—Ä—Ç–∞–ª',baseCost:1e12,baseCPS:10000000,emoji:'üåÄ'},
  {key:'blackhole',name:'–ß—ë—Ä–Ω–∞—è –¥—ã—Ä–∞',baseCost:1e14,baseCPS:66666666,emoji:'üåå'},
  {key:'timeMachine',name:'–ú–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏',baseCost:1e16,baseCPS:2e8,emoji:'‚è≥'},
  {key:'antimatter',name:'–ê–Ω—Ç–∏-–º–∞—Ç–µ—Ä–∏—è',baseCost:1e18,baseCPS:1e9,emoji:'üï≥Ô∏è'},
  {key:'quantumLab',name:'–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è',baseCost:5e19,baseCPS:5e9,emoji:'üî¨'},
  {key:'galaxyFactory',name:'–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∞–±—Ä–∏–∫–∞',baseCost:1e21,baseCPS:2e10,emoji:'üåå'},
  {key:'universeForge',name:'–í—Å–µ–ª–µ–Ω—Å–∫–∞—è –∫—É–∑–Ω–∏—Ü–∞',baseCost:1e23,baseCPS:1e11,emoji:'üå†'},
  {key:'darkMatterPlant',name:'–§–∞–±—Ä–∏–∫–∞ —Ç—ë–º–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∏',baseCost:1e25,baseCPS:5e11,emoji:'üõ∏'},
  {key:'nanoFactory',name:'–ù–∞–Ω–æ—Ñ–∞–±—Ä–∏–∫–∞',baseCost:1e27,baseCPS:2e12,emoji:'ü§ñ'},
  {key:'cosmoLab',name:'–ö–æ—Å–º–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è',baseCost:1e29,baseCPS:1e13,emoji:'ü™ê'},
  {key:'megaBank',name:'–ú–µ–≥–∞-–ë–∞–Ω–∫',baseCost:1e31,baseCPS:5e13,emoji:'üèõÔ∏è'},
  {key:'aiOverlord',name:'–ò–ò –ü–æ–≤–µ–ª–∏—Ç–µ–ª—å',baseCost:1e33,baseCPS:2e14,emoji:'ü§ñ'},
  {key:'orbitalStation',name:'–û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è',baseCost:1e35,baseCPS:1e15,emoji:'üõ∞Ô∏è'},
  {key:'terraformer',name:'–¢–µ—Ä—Ä–∞—Ñ–æ—Ä–º–µ—Ä',baseCost:1e37,baseCPS:5e15,emoji:'üèûÔ∏è'},
  {key:'spaceFactory',name:'–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Ñ–∞–±—Ä–∏–∫–∞',baseCost:1e39,baseCPS:2e16,emoji:'üöÄ'},
  {key:'starForge',name:'–ö—É–∑–Ω–∏—Ü–∞ –∑–≤—ë–∑–¥',baseCost:1e41,baseCPS:1e17,emoji:'‚≠ê'},
  {key:'blackHoleForge',name:'–§–∞–±—Ä–∏–∫–∞ —á—ë—Ä–Ω—ã—Ö –¥—ã—Ä',baseCost:1e43,baseCPS:5e17,emoji:'üï≥Ô∏è'},
  {key:'multiverseLab',name:'–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –º—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–æ–π',baseCost:1e45,baseCPS:2e18,emoji:'üåå'},
  {key:'dimensionGate',name:'–í—Ä–∞—Ç–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π',baseCost:1e47,baseCPS:1e19,emoji:'üåÄ'},
  {key:'timeForge',name:'–í–µ—á–Ω–∞—è –∫—É–∑–Ω–∏—Ü–∞ –≤—Ä–µ–º–µ–Ω–∏',baseCost:1e49,baseCPS:5e19,emoji:'‚è≥'},
  {key:'eternityLab',name:'–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –≤–µ—á–Ω–æ—Å—Ç–∏',baseCost:1e51,baseCPS:2e20,emoji:'ü™ê'},
  {key:'galacticBank',name:'–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –±–∞–Ω–∫',baseCost:1e53,baseCPS:1e21,emoji:'üè¶'},
  {key:'darkEnergyPlant',name:'–§–∞–±—Ä–∏–∫–∞ —Ç—ë–º–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏',baseCost:1e55,baseCPS:5e21,emoji:'‚ö°'},
  {key:'supernovaLab',name:'–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —Å–≤–µ—Ä—Ö–Ω–æ–≤—ã—Ö',baseCost:1e57,baseCPS:2e22,emoji:'üí•'},
  {key:'quantumForge',name:'–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∫—É–∑–Ω–∏—Ü–∞',baseCost:1e59,baseCPS:1e23,emoji:'üî¨'},
  {key:'infinityFactory',name:'–§–∞–±—Ä–∏–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏',baseCost:1e61,baseCPS:5e23,emoji:'‚ôæÔ∏è'},
  {key:'omniverseLab',name:'–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –û–º–Ω–∏–≤–µ—Ä—Å—É–º',baseCost:1e63,baseCPS:2e24,emoji:'üåå'},
  {key:'godMachine',name:'–ú–∞—à–∏–Ω–∞ –ë–æ–≥–∞',baseCost:1e65,baseCPS:1e25,emoji:'üõ∏'},
  {key:'finalForge',name:'–§–∏–Ω–∞–ª—å–Ω–∞—è –∫—É–∑–Ω–∏—Ü–∞',baseCost:1e67,baseCPS:5e25,emoji:'üî•'}
];

// ======== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è ========
function initState(){
  state.buildings = {};
  buildingList.forEach(b=>{
    state.buildings[b.key]={...b, qty:0, cps:b.baseCPS, cost:b.baseCost};
  });
  // 1000 –∞–ø–≥—Ä–µ–π–¥–æ–≤
  const buildingKeys = Object.keys(state.buildings);
  state.upgrades = {};
  for(let i=1;i<=1000;i++){
    const type = Math.random()<0.5?'click':'building';
    let u={id:i,bought:false,type:type,multiplier:2,cost:Math.round(100*Math.pow(1.15,i))};
    if(type==='click') u.name=`–£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞ √ó2`;
    else { u.target=buildingKeys[Math.floor(Math.random()*buildingKeys.length)]; u.name=`–£–ª—É—á—à–µ–Ω–∏–µ ${u.target} √ó2`; }
    state.upgrades[i]=u;
  }
}
initState();

// ======== –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã ========
function fmt(n){if(n<1000) return Math.round(n*100)/100; const units=['K','M','B','T','Qa','Qi','Sx','Sp','Oc','No']; let u=-1,v=n; while(v>=1000&&u<units.length-1){v/=1000;u++;} return v.toFixed(2)+units[u];}

function clickCookie(){ state.cookies+=state.clickPower; state.totalCookies+=state.clickPower; spawnCrumb(); render(); }

function buyBuilding(key){
  const b=state.buildings[key];
  if(state.cookies>=b.cost){ state.cookies-=b.cost; b.qty++; b.cost=Math.round(b.baseCost*Math.pow(1.15,b.qty)); render(); }
}

function buyUpgrade(id){
  const u=state.upgrades[id];
  if(!u.bought && state.cookies>=u.cost){
    state.cookies-=u.cost;
    u.bought=true;
    if(u.type==='click') state.clickPower*=u.multiplier;
    if(u.type==='building') state.buildings[u.target].cps*=u.multiplier;
    render();
  }
}

function prestigeReset(){
  const earned=Math.floor(Math.sqrt(state.totalCookies/1e6));
  if(earned>0){
    state.prestige.points+=earned;
    state.prestige.multiplier=1+state.prestige.points*0.05;
    state.cookies=0; state.clicks=0; state.totalCookies=0;
    Object.values(state.buildings).forEach(b=>{ b.qty=0; b.cps=b.baseCPS; b.cost=b.baseCost; });
    Object.values(state.upgrades).forEach(u=>u.bought=false);
    render();
  }
}

function getCPS(){ let cps=0; Object.values(state.buildings).forEach(b=>cps+=b.qty*b.cps); return cps*state.prestige.multiplier; }

// ======== Render ========
function render(){
  document.getElementById('cookiesDisplay').textContent=fmt(state.cookies);
  document.getElementById('cpsDisplay').textContent=fmt(getCPS());
  document.getElementById('clickPower').textContent=fmt(state.clickPower);
  document.getElementById('prestigePoints').textContent=fmt(state.prestige.points);

  const storeDiv=document.getElementById('store'); storeDiv.innerHTML='';
  buildingList.forEach(b=>{
    const bi=state.buildings[b.key];
    const div=document.createElement('div'); div.className='item';
    div.innerHTML=`<div>${b.emoji} ${b.name}</div><div>${fmt(bi.cost)} | CPS: ${fmt(bi.cps)} √ó ${bi.qty}</div><button onclick="buyBuilding('${b.key}')">–ö—É–ø–∏—Ç—å</button>`;
    storeDiv.appendChild(div);
  });

  const upDiv=document.getElementById('upgrades'); upDiv.innerHTML='';
  Object.values(state.upgrades).forEach(u=>{
    const div=document.createElement('div'); div.className='upgrade'+(u.bought?' bought':'');
    div.innerHTML=`<div>${u.name} (${fmt(u.cost)})</div><button onclick="buyUpgrade(${u.id})" ${u.bought?'disabled':''}>–ö—É–ø–∏—Ç—å</button>`;
    upDiv.appendChild(div);
  });
}

// ======== –ö—Ä–æ—à–∫–∏ ========
function spawnCrumb(){
  const cookie=document.getElementById('cookieBtn');
  const crumb=document.createElement('div');
  crumb.className='crumb';
  crumb.style.left=Math.random()*180+'px';
  crumb.style.top=Math.random()*180+'px';
  cookie.appendChild(crumb);
  setTimeout(()=>crumb.remove(),500);
}

// ======== –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω ========
function updateBackground(){
  const levels=['#1f1f2e','#27273a','#2f2f44','#383854','#414164'];
  let index=Math.min(levels.length-1,Math.floor(Math.log10(state.totalCookies+1)/13*levels.length));
  document.body.style.background=levels[index];
}

// ======== –¶–∏–∫–ª –∏–≥—Ä—ã ========
function gameTick(){
  const now=Date.now();
  const diff=(now-state.lastTick)/1000;
  state.cookies+=getCPS()*diff;
  state.totalCookies+=getCPS()*diff;
  state.lastTick=now;
  render();
  updateBackground();
}
setInterval(gameTick,100);

// ======== –°–æ–±—ã—Ç–∏—è ========
const cookieBtn=document.getElementById('cookieBtn');
cookieBtn.addEventListener('click',clickCookie);
cookieBtn.addEventListener('touchstart',e=>{ e.preventDefault(); clickCookie(); });

document.getElementById('prestigeBtn').onclick=prestigeReset;

render();
</script>
