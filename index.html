<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cookie Clicker Stable</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f5f5dc;
  display: flex;
  flex-direction: column;
  align-items: center;
}
header {
  position: fixed; top: 0; left: 0; right: 0;
  background-color: #fff8dc;
  border-bottom: 2px solid #deb887;
  padding: 10px;
  z-index: 10;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  gap: 10px;
}
header p { margin: 5px; font-weight: bold; }
#main {
  margin-top: 140px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  width: 100%;
  max-width: 600px;
  padding: 0 10px;
  box-sizing: border-box;
}
#cookie {
  font-size: 150px;
  cursor: pointer;
  user-select: none;
  transition: transform 0.1s;
}
#cookie:active { transform: scale(1.2); }
.section {
  width: 100%;
  background-color: #fff8dc;
  border: 1px solid #deb887;
  border-radius: 10px;
  padding: 10px;
  box-sizing: border-box;
  max-height: 300px;
  overflow-y: auto;
}
.section h2 { margin-top: 0; text-align: center; }
.object, .upgrade { display: flex; justify-content: space-between; align-items: center; margin: 5px 0; }
button { padding: 5px 10px; border-radius: 5px; border: none; background-color: #deb887; color: #fff; cursor: pointer; }
button:disabled { background-color: #ccc; cursor: not-allowed; }
@media (max-width: 768px) { #cookie { font-size: 120px; } }
</style>
</head>
<body>

<header>
  <p>–ü–µ—á–µ–Ω—å–∫–∏: <span id="cookies">0</span></p>
  <p>CPS: <span id="cps">0</span></p>
  <p>–ö–ª–∏–∫–∏: <span id="clicks">0</span></p>
  <p>–ü—Ä–µ—Å—Ç–∏–∂: <span id="prestige">0</span></p>
  <button id="prestigeBtn">–ü—Ä–µ—Å—Ç–∏–∂</button>
</header>

<div id="main">
  <div id="cookie">üç™</div>
  <div class="section">
    <h2>–û–±—ä–µ–∫—Ç—ã</h2>
    <div id="objects"></div>
  </div>
  <div class="section">
    <h2>–ê–ø–≥—Ä–µ–π–¥—ã</h2>
    <div id="upgrades"></div>
  </div>
</div>

<script>
let cookies = 0, totalClicks = 0, clickPower = 1, cps = 0;
let prestigePoints = 0, prestigeMultiplier = 1;

const objectsData = [
  { name: 'Cursor', cost: 15, cps: 0.1, amount: 0 },
  { name: 'Grandma', cost: 100, cps: 1, amount: 0 },
  { name: 'Farm', cost: 500, cps: 8, amount: 0 },
  { name: 'Factory', cost: 3000, cps: 47, amount: 0 },
  { name: 'Mine', cost: 10000, cps: 260, amount: 0 }
];

const upgradesData = [
  { name: '–°–∏–ª—å–Ω–µ–µ –∫–ª–∏–∫', cost: 100, type: 'click', multiplier: 2, purchased: false },
  { name: '–ë–∞–±—É—à–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ', cost: 500, type: 'object', target: 'Grandma', multiplier: 2, purchased: false }
];

const cookieBtn = document.getElementById('cookie');
const cookiesDisplay = document.getElementById('cookies');
const clicksDisplay = document.getElementById('clicks');
const cpsDisplay = document.getElementById('cps');
const prestigeDisplay = document.getElementById('prestige');
const objectsContainer = document.getElementById('objects');
const upgradesContainer = document.getElementById('upgrades');
const prestigeBtn = document.getElementById('prestigeBtn');

function updateStats(){
  cookiesDisplay.textContent = Math.floor(cookies);
  clicksDisplay.textContent = totalClicks;
  cpsDisplay.textContent = (cps*prestigeMultiplier).toFixed(1);
  prestigeDisplay.textContent = prestigePoints;
}

function calculateCPS(){
  cps = objectsData.reduce((sum,obj)=>sum + obj.cps*obj.amount,0);
}

function initObjects(){
  objectsContainer.innerHTML = '';
  objectsData.forEach((obj,index)=>{
    const button = document.createElement('button');
    button.textContent = `–ö—É–ø–∏—Ç—å (${obj.cost})`;
    button.disabled = cookies < obj.cost;
    button.addEventListener('pointerdown',()=>buyObject(index));
    const div = document.createElement('div');
    div.className='object';
    div.innerHTML=`<span>${obj.name} (x${obj.amount}) - CPS: ${obj.cps}</span>`;
    div.appendChild(button);
    objectsContainer.appendChild(div);
  });
}

function buyObject(index){
  const obj = objectsData[index];
  if(cookies >= obj.cost){
    cookies -= obj.cost;
    obj.amount++;
    obj.cost = Math.floor(obj.cost * 1.15);
    calculateCPS();
    updateStats();
    initObjects();
    saveGame();
  }
}

function initUpgrades(){
  upgradesContainer.innerHTML = '';
  upgradesData.forEach((upg,index)=>{
    const button = document.createElement('button');
    button.textContent = `–ö—É–ø–∏—Ç—å (${upg.cost})`;
    button.disabled = upg.purchased || cookies < upg.cost;
    button.addEventListener('pointerdown',()=>buyUpgrade(index));
    const div = document.createElement('div');
    div.className='upgrade';
    div.innerHTML=`<span>${upg.name}</span>`;
    div.appendChild(button);
    upgradesContainer.appendChild(div);
  });
}

function buyUpgrade(index){
  const upg = upgradesData[index];
  if(cookies >= upg.cost && !upg.purchased){
    cookies -= upg.cost;
    upg.purchased = true;
    if(upg.type === 'click') clickPower *= upg.multiplier;
    else if(upg.type === 'object'){
      const obj = objectsData.find(o=>o.name===upg.target);
      obj.cps *= upg.multiplier;
      calculateCPS();
    }
    updateStats();
    initObjects();
    initUpgrades();
    saveGame();
  }
}

cookieBtn.addEventListener('pointerdown', () => {
  cookies += clickPower * prestigeMultiplier;
  totalClicks++;
  updateStats();
  saveGame();
});

setInterval(()=>{
  cookies += cps*prestigeMultiplier/10;
  updateStats();
},100);

prestigeBtn.addEventListener('pointerdown',()=>{
  if(cookies >= 10000){
    prestigePoints++;
    prestigeMultiplier = 1 + prestigePoints*0.1;
    cookies = 0;
    objectsData.forEach(obj=>obj.amount=0);
    upgradesData.forEach(upg=>upg.purchased=false);
    calculateCPS();
    updateStats();
    initObjects();
    initUpgrades();
    saveGame();
  }
});

function saveGame(){
  const save={cookies,totalClicks,clickPower,cps,prestigePoints,objectsData,upgradesData};
  localStorage.setItem('cookieClickerSave',JSON.stringify(save));
}

function loadGame(){
  const save=JSON.parse(localStorage.getItem('cookieClickerSave'));
  if(save){
    cookies=save.cookies;
    totalClicks=save.totalClicks;
    clickPower=save.clickPower;
    cps=save.cps;
    prestigePoints=save.prestigePoints;
    prestigeMultiplier = 1 + prestigePoints*0.1;
    save.objectsData.forEach((obj,i)=>objectsData[i].amount=obj.amount);
    save.upgradesData.forEach((upg,i)=>upgradesData[i].purchased=upg.purchased);
    calculateCPS();
  }
}

loadGame();
initObjects();
initUpgrades();
updateStats();
</script>

</body>
</html>
